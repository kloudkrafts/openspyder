Steps:

  - Name: GetProjectZones
    Worker: mongoDBConnector
    Job: execute_query
    Output: GCPProjectZones
    Params:
      query_name: GetProjectZones
      query_conf:
        collection: GCPProjectZones
        operations:
          $unset:
            - _id

  - Name: GetComputeInstances
    Worker: gcloudComputeConnector
    Job: get_data
    Output: ComputeInstances
    Input: GCPProjectZones.data
    Params:
      model_name: ComputeInstances

  - Name: StoreInstancesToMongo
    Worker: mongoDBConnector
    Job: upsert_dataset
    Input: ComputeInstances
    Output: ComputeInstancesInsertionResult
    Params:
      collection: GCPComputeInstances